<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Noto+Serif+Bengali:wght@100..900&display=swap" rel="stylesheet">
    <title>Skins - Apple Univ</title>
    
    <meta property="og:title" content="Apple Univ Bus Skins - Free Download">
    <meta property="og:description" content="Download the latest collection of Univ bus skins for Bus Simulator Bangladesh. Get your favorite skins for free!">
    <meta property="og:image" content="https://example.com/simg/default_1jog_image.jpg"> <meta property="og:url" content="https://bsbdomg.vercel.app/skins/1jog.html">
    <meta property="og:type" content="website">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Poppins, sans-serif;
        }
        body {
            background-color: #f4f4f4;
            padding: 10px;
            font-family: Poppins, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center; 
        }

        /* ‚≠êÔ∏è NEW: Container for single view mode ‚≠êÔ∏è */
        body.single-view .caption, 
        body.single-view .search-container,
        body.single-view .marquee {
            display: none;
        }
        body.single-view .bskin-container {
            flex-direction: column; /* Stack the one visible card */
            align-items: center;
            margin-top: 50px; /* Center the single card vertically a bit */
        }
        body.single-view .bskin-card {
            width: 90% !important; /* Make the single card bigger/central */
            max-width: 500px;
        }
        /* ‚≠êÔ∏è END NEW ‚≠êÔ∏è */

        .caption {
            text-align: center; 
            width: 100%; 
            max-width: 1200px; 
            margin-bottom: 20px;
        }
        .caption h2 {
            border-bottom: 2px solid #4CAF50;
            display: inline-block;
            padding-bottom: 0px;
            margin-top: 20px;
        }
        .search-container input {
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .search-container input:focus {
            border-color: #4CAF50;
            outline: none;
        }
        .bskin-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
            max-width: 1200px; 
        }
        .bskin-card {
            background: #fff;
            width: calc(25% - 20px); 
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            text-align: center;
            margin-bottom: 20px;
        }
        .bskin-card img {
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        .bskin-info {
            padding: 15px;
        }
        .bskin-info h2 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        .bskin-info p {
            font-size: 12px;
            color: #666;
            margin-bottom: 0px;
        }
        .author {
            text-decoration: none;
        }
        .author p {
            font-size: 12px;
            color: #5f6ca1;
            margin-bottom: 0px;
        }
        .free {
            color: #e74c3c;
            margin-top: 2px;
            margin-bottom: 4px;
            font-size: 14px;
            font-weight: bold;
        }
        .captcha-container {
            display: inline-block;
        }
        .captcha-code {
            font-weight: bold;
            font-size: 16px;
            color: #ff0000;
            margin-bottom: -8px;
        }
        input {
            padding: 8px;
            margin: 8px 0;
            font-family: Poppins;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 50%;
            max-width: 200px;
        }
        button {
            padding: 8px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .download-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 5px;
        }
        .download-links a {
            padding: 8px 15px;
            background-color: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            pointer-events: none;
            opacity: 0.5;
        }
        .download-links a.enabled {
            pointer-events: auto;
            opacity: 1;
        }

        .download-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .download-count {
            font-size: 12px;
            color: #333;
            margin-top: 5px;
            font-weight: 600;
            min-width: 80px;
            text-align: center;
        }
        
        /* ‚≠êÔ∏è CSS FOR SHARE BUTTON ‚≠êÔ∏è */
        .share-container {
            margin-top: 15px; 
            text-align: center;
        }

        .share-btn {
            padding: 8px 15px;
            background-color: #55acee; 
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.3s;
        }

        .share-btn:hover {
            background-color: #4490c2;
        }

        .share-btn::before {
            content: "üîó"; 
            font-size: 16px;
        }
        /* ‚≠êÔ∏è END SHARE CSS ‚≠êÔ∏è */
        
        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .bskin-card {
                width: calc(33.33% - 20px); 
            }
        }

        @media (max-width: 768px) {
            .bskin-card {
                width: calc(50% - 20px); 
            }
        }

        @media (max-width: 480px) {
            .bskin-card {
                width: 90%; 
            }
        }

    </style>


</head>
<body>
    <marquee direction="left" style="font-family: 'Noto Serif Bengali', serif; font-size: 18px; color: #333; margin-bottom: 20px;" class="marquee">
        ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ‡¶É ‡¶®‡¶ø‡¶Æ‡ßç‡¶®‡ßã‡¶ï‡ßç‡¶§ ‡¶∏‡¶ï‡¶≤ ‡¶∏‡ßç‡¶ï‡¶ø‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π ‡¶ï‡ßã‡¶®‡ßã‡¶∞‡ßÇ‡¶™ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ, ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßá ‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ï‡¶ø‡¶Ç‡¶¨‡¶æ ‡¶ï‡ßã‡¶•‡¶æ‡¶ì ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶ø‡¶∞‡¶§ ‡¶•‡¶æ‡¶ï‡ßÅ‡¶®‡•§ ‡¶∏‡ßç‡¶ï‡¶ø‡¶® ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã‡¶∞‡ßÇ‡¶™ ‡¶Ö‡¶™‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø/‡¶ó‡ßç‡¶∞‡ßÅ‡¶™/‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ï‡ßá ‡¶∏‡¶ï‡¶≤‡ßá‡¶∞ ‡¶∏‡¶æ‡¶Æ‡¶®‡ßá ‡¶¨‡ßç‡¶Ø‡¶ô‡ßç‡¶ó‡¶æ‡¶§‡ßç‡¶Æ‡¶ï ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§ ‡¶Ü‡¶¶‡ßá‡¶∂‡¶ï‡ßç‡¶∞‡¶Æ‡ßá‡¶É ‡¶Ö‡¶´‡¶ø‡¶∏‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡•§     </marquee>
    <div class="caption"><h2>APPLE UNIV Skins</h2></div>
        <div class="search-container" style="width:100%; max-width:1200px; margin-bottom: 20px; text-align:center;">
        <input type="text" id="skin-search" placeholder=" Search skins..." style="width:80%; max-width:400px; padding:8px; font-size:16px;">
    </div>
    <div id="no-results" style="display:none; text-align:center; color:#888; margin-top: 20px;">
        <div style="font-size: 40px; margin-bottom: 10px;">üîç</div>
        <div style="font-size: 18px;">No skins found. Try another search.</div>
    </div>


    <div class="bskin-container">
      
        <div class="bskin-card" data-skin-id="UNIV01" data-image-url="simg/univ/Bangla Star.jpg" data-title="Bangla Star">
            <img src="simg/univ/Bangla Star.jpg" alt="Bangla Star Image">
            <div class="bskin-info">
                <h2>Bangla Star</h2>
                <p>Route: Pabna - Chattogram</p>
                <a class="author" href="#"><p>Author: Sakil Islam</p></a>
                <div class="price free">FREE</div>
                <div class="captcha-container">
                    <span class="captcha-code">UNIV01</span> <br>
                    <input type="text" class="captchaInput" placeholder="Enter code">
                    <button onclick="verifyCaptcha(this)">Verify</button>
                </div>
                <div class="download-links">
                    <div class="download-item">
                    <a href="Bus Skins/Sakil Islam/UNIV/Bangla Star Bus Paint By Sakil Islam.png" class="download-btn" download onclick="handleDownload('Bangla Star', 'paint', this)">Paint</a>
                    <div class="download-count paintCount"></div>
                    </div>
                    <div class="download-item">
                    <a href="Bus Skins/Sakil Islam/UNIV/Bangla Star Bus Glass By Sakil Islam.png" class="download-btn" download onclick="handleDownload('Bangla Star', 'glass', this)">Glass</a>
                    <div class="download-count glassCount"></div>
                    </div>
                </div>
                <div class="share-container">
                    <button class="share-btn" 
                            data-skin-id="UNIV01"
                            data-title="Bangla Star Skin (UNIV01)"
                            data-text="Download the FREE Bangla Star bus skin for Bus Simulator Bangladesh!">
                        Share Link
                    </button>
                </div>
                </div> 
           </div>
           <div class="bskin-card" data-skin-id="OG2" data-image-url="simg/univ/n/a.jpg" data-title="Himachal">
            <img src="simg/univ/Himachal.jpg" alt="Himachal Image">
            <div class="bskin-info">
                <h2>B/N</h2>
                <p>Route: Any</p>
                <a class="author" href="#"><p>Author: </p></a>
                <div class="price free">FREE</div>
                <div class="captcha-container">
                    <span class="captcha-code">**</span> <br>
                    <input type="text" class="captchaInput" placeholder="Enter code">
                    <button onclick="verifyCaptcha(this)">Verify</button>
                </div>
                <div class="download-links">
                    <a href="https://drive.google.com/uc?export=download&id=1JUoH6uHrJHAvBaXLRNZWtgqyMrCP-iKU&confirm=t" class="download-btn" download>Paint</a>
                    <a href="https://drive.google.com/uc?export=download&id=1JQJS0B1xh1loB8wHixlsvJ-nhXxR-1Fm&confirm=t" class="download-btn" download>Glass</a>
                </div>
                <div class="share-container">
                    <button class="share-btn" 
                            data-skin-id="OG2"
                            data-title="Himachal Skin (OG2)"
                            data-text="Download the FREE Himachal bus skin for Bus Simulator Bangladesh!">
                        Share Link
                    </button>
                </div>
                </div> 
           </div>
           
           
           

    </div>
    <script>
// =======================================================
// CAPTCHA and DOWNLOAD HANDLING (Existing logic)
// =======================================================
function verifyCaptcha(button) {
    const card = button.closest(".bskin-card");
    const input = card.querySelector(".captchaInput").value;
    const captchaText = card.querySelector(".captcha-code").innerText;
    const downloadBtns = card.querySelectorAll(".download-btn");

    if (input === captchaText) {
        downloadBtns.forEach(btn => btn.classList.add("enabled"));
    } else {
        alert("Incorrect CAPTCHA! Try again.");
    }
}

// Count & update Firebase
function handleDownload(skinId, type, element) {
    if (!element.classList.contains('enabled')) {
        alert("Please complete the CAPTCHA first.");
        event.preventDefault(); // block download if not verified
        return;
    }

    // Assuming skinId is the H2 title (e.g., 'Himalay Express')
    const card = element.closest(".bskin-card");
    const name = card.querySelector('h2').innerText.trim(); 

    const refPath = `univ/${name}/${type}`;
    const ref = db.ref(refPath);

    // Transaction to safely increment
    ref.transaction(count => (count || 0) + 1);
}

// Show download counts
function loadAllCounts() {
    const allCards = document.querySelectorAll('.bskin-card');

    allCards.forEach(card => {
        const name = card.querySelector('h2').innerText.trim(); 

        const downloadItems = card.querySelectorAll('.download-item');

        downloadItems.forEach(item => {
            const isPaint = item.querySelector('a')?.innerText?.toLowerCase().includes('paint');
            const countEl = item.querySelector('.download-count');

            if (!countEl) return;

            const refPath = `univ/${name}/${isPaint ? 'paint' : 'glass'}`;

            firebase.database().ref(refPath).on('value', snapshot => {
                const count = snapshot.val() || 0;
                countEl.innerText = `${isPaint ? 'Paint' : 'Glass'}: ${count}`;
            });
        });
    });
}


// =======================================================
// ‚≠êÔ∏è CORE CHANGES: SINGLE-CARD VIEW & META TAG UPDATE ‚≠êÔ∏è
// =======================================================

// 1. Share button setup: Generates the specific URL
function setupShareButtons() {
    document.querySelectorAll('.share-btn').forEach(button => {
        button.addEventListener('click', () => {
            const skinId = button.getAttribute('data-skin-id'); // e.g., OG1
            const skinTitle = button.getAttribute('data-title');
            
            // Note: window.location.origin is needed for absolute path in meta tags
            const baseUrl = window.location.origin + window.location.pathname; 
            const shareUrl = `${baseUrl}?skin=${skinId}`;
            
            if (navigator.share) {
                // Native Web Share API (Mobile)
                navigator.share({
                    title: skinTitle,
                    text: `Download the FREE ${skinTitle} bus skin for Bus Simulator Bangladesh!`,
                    url: shareUrl 
                })
                .catch((error) => {
                    // Fallback on cancel or error
                    copyLinkFallback(skinTitle, shareUrl);
                });
            } else {
                // Fallback for desktop
                copyLinkFallback(skinTitle, shareUrl);
            }
        });
    });
}

// 2. Fallback: Copies the unique link
function copyLinkFallback(title, url) {
    navigator.clipboard.writeText(url)
        .then(() => {
            alert(`Link copied to clipboard! Share this direct link: \n${url}`);
        })
        .catch(err => {
            console.error('Could not copy text: ', err);
            prompt("Copy this link to share the skin:", url);
        });
}

// 3. ‚≠êÔ∏è NEW LOGIC: Filter Cards AND Update Meta Tags ‚≠êÔ∏è
function filterSkinsByUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const targetSkinId = urlParams.get('skin'); // Get the 'OG1', 'OG2', etc. value
    const body = document.body;

    if (targetSkinId) {
        let foundCard = null;
        const allCards = document.querySelectorAll('.bskin-card');
        
        allCards.forEach(card => {
            const cardId = card.getAttribute('data-skin-id');
            if (cardId === targetSkinId) {
                card.style.display = ""; // Show the target card
                foundCard = card;
            } else {
                card.style.display = "none"; // Hide all other cards
            }
        });

        if (foundCard) {
            // Apply single-view CSS class
            body.classList.add('single-view');
            
            const cardTitle = foundCard.getAttribute('data-title');
            const cardImageRelativeUrl = foundCard.getAttribute('data-image-url');
            
            // ‚≠êÔ∏è IMPORTANT: Get the absolute URL for sharing platforms ‚≠êÔ∏è
            const absoluteImageUrl = window.location.origin + window.location.pathname.replace('1jog.html', '') + cardImageRelativeUrl;
            
            const cardDescription = `Download the FREE ${cardTitle} bus skin for Bus Simulator Bangladesh!`;
            const currentShareUrl = window.location.href; // The URL with the ?skin=ID

            // ‚≠êÔ∏è Dynamically update the Open Graph (OG) Meta Tags ‚≠êÔ∏è
            // This is what changes the preview image/title on social media/chat apps.
            updateMetaTag('og:title', cardTitle + ' - Kiwi 1JOG');
            updateMetaTag('og:description', cardDescription);
            updateMetaTag('og:image', absoluteImageUrl);
            updateMetaTag('og:url', currentShareUrl);
            
            // Update the page title as well
            document.title = cardTitle + ' - Kiwi 1JOG Skin';
            
        } else {
             // If the parameter is there but invalid, show the whole page normally
            body.classList.remove('single-view');
            alert("The requested skin was not found.");
            // Reset URL (optional, but cleaner)
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    } else {
        // No skin parameter, show full gallery view (default meta tags will be used)
        body.classList.remove('single-view');
    }
}

// Helper function to update/create meta tags
function updateMetaTag(property, content) {
    let tag = document.querySelector(`meta[property='${property}']`);
    if (!tag) {
        tag = document.createElement('meta');
        tag.setAttribute('property', property);
        document.head.appendChild(tag);
    }
    tag.setAttribute('content', content);
}


// =======================================================
// INITIALIZATION
// =======================================================
document.addEventListener('DOMContentLoaded', function() {
    // 1. Check URL first to see if we need to filter/hide cards AND update meta tags
    filterSkinsByUrl(); 
    
    // 2. Setup the share buttons with the new logic
    setupShareButtons();
    
    // 3. Load download counts
    loadAllCounts();

    // 4. Search setup (Existing logic - will not work in single-view mode)
    const searchInput = document.getElementById('skin-search');
    const noResults = document.getElementById('no-results');

    searchInput.addEventListener('input', function () {
        const query = searchInput.value.toLowerCase().trim();
        const cards = document.querySelectorAll('.bskin-card');
        let matchCount = 0;

        // If in single-view mode, do not allow searching
        if (document.body.classList.contains('single-view')) {
            searchInput.value = ''; // Clear input
            return;
        }

        cards.forEach(card => {
            const title = card.querySelector('h2')?.innerText.toLowerCase() || '';
            
            if (title.includes(query)) {
                card.style.display = "";
                matchCount++;
            } else {
                card.style.display = "none";
            }
        });

        if (matchCount === 0) {
            noResults.style.display = "block";
        } else {
            noResults.style.display = "none";
        }
    });
});
</script> 
    

    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<script>
¬† // Replace with your Firebase config
¬† const firebaseConfig = {
¬† ¬† apiKey: "AIzaSyByHEEWUxODtMkioDEXHz3Wze_t_a4wxZg",
¬† ¬† authDomain: "bsbd-skin-downloads.firebaseapp.com",
¬† ¬† databaseURL: "https://bsbd-skin-downloads-default-rtdb.firebaseio.com",
¬† ¬† projectId: "bsbd-skin-downloads",
¬† ¬† storageBucket: "bsbd-skin-downloads.firebasestorage.app",
¬† ¬† messagingSenderId: "19620693297",
¬† ¬† appId: "1:19620693297:web:b3242de89bebf6c2b6dc10"
¬† };

¬† firebase.initializeApp(firebaseConfig);
¬† const db = firebase.database();
</script>


</body>
</html>
